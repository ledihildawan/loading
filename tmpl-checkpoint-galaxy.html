<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cosmic Infinity | The Final Divider Engine</title>
  <style>
    /* ============================================================
       1. SYSTEM TOKENS (OKLCH COSMIC PALETTE)
       ============================================================ */
    :root {
      --bg: oklch(6% 0.01 260); 
      --text: oklch(98% 0.01 260);
      --text-muted: oklch(60% 0.02 260);
      --brand: oklch(70% 0.22 260); 
      
      --brand-glow: color-mix(in oklch, var(--brand), transparent 40%);
      --brand-nebula: color-mix(in oklch, var(--brand), transparent 85%);
      --line-color: oklch(20% 0.02 260); 

      --anim-speed: 1.8s;
      --charging-delay: 0.4s;
      --bezier-kinetic: cubic-bezier(0.16, 1, 0.3, 1);
      
      --d-active-sz: clamp(10px, 1.5vw, 12px);
      --d-offset: calc(var(--d-active-sz) / 2);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body { 
      background-color: var(--bg); 
      color: var(--text); 
      font-family: 'Inter', system-ui, -apple-system, sans-serif; 
      overflow: hidden; 
    }

    /* ============================================================
       2. 3D PARALLAX STACKING
       ============================================================ */
    .parallax-wrapper { 
      perspective: 10px;
      perspective-origin: 50% 50%;
      height: 100dvh; 
      overflow-x: hidden; 
      overflow-y: auto;
      scroll-behavior: smooth;
    }

    .layout-frame { 
      position: relative; 
      margin: 0 auto; 
      width: 100%; 
      max-width: 1400px; 
      border-left: 1px dashed var(--line-color); 
      border-right: 1px dashed var(--line-color); 
      transform-style: preserve-3d; 
      min-height: 100%;
    }

    /* STAR PARALLAX LAYERS */
    .stars-layer {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      pointer-events: none;
      z-index: -2;
    }

    .stars-layer-1 {
      transform: translateZ(-8px) scale(1.8);
      background-image: 
        radial-gradient(1px 1px at 20px 30px, #fff, rgba(0,0,0,0)),
        radial-gradient(1px 1px at 150px 400px, #fff, rgba(0,0,0,0)),
        radial-gradient(1.2px 1.2px at 300px 100px, oklch(90% 0.1 260), rgba(0,0,0,0));
      background-size: 400px 400px;
      opacity: 0.4;
    }

    .stars-layer-2 {
      transform: translateZ(-3px) scale(1.3);
      background-image: 
        radial-gradient(1.5px 1.5px at 50px 100px, var(--brand), rgba(0,0,0,0)),
        radial-gradient(2px 2px at 350px 450px, #fff, rgba(0,0,0,0));
      background-size: 600px 600px;
      animation: twinklePulse 10s ease-in-out infinite alternate;
    }

    @keyframes twinklePulse { from { opacity: 0.3; } to { opacity: 0.9; } }

    /* ============================================================
       3. SECTION CONTENT (FLOATING LAYER)
       ============================================================ */
    .section { 
      height: 100dvh; 
      display: flex; 
      flex-direction: column; 
      justify-content: center; 
      align-items: center; 
      text-align: center; 
      padding: 0 10%; 
      position: relative;
      transform-style: preserve-3d;
    }

    .parallax-bg-text { 
      position: absolute; 
      font-size: clamp(8rem, 20vw, 25rem); 
      font-weight: 900; 
      color: var(--brand); 
      opacity: 0.04; 
      z-index: -1; 
      transform: translateZ(-5px) scale(1.5);
      pointer-events: none; 
      user-select: none;
      white-space: nowrap;
    }

    .content-float {
      transform: translateZ(2px) scale(0.8); /* Teks mengambang maju */
      z-index: 10;
    }

    .section h2 { font-size: clamp(2.5rem, 8vw, 4.5rem); font-weight: 850; letter-spacing: -0.05em; margin-bottom: 1.5rem; line-height: 1; }
    .section p { color: var(--text-muted); font-size: clamp(1.1rem, 2vw, 1.4rem); max-width: 650px; line-height: 1.6; }
    .badge { font-size: 0.75rem; font-weight: 700; color: var(--brand); text-transform: uppercase; letter-spacing: 0.5em; margin-bottom: 1.2rem; display: inline-block; }

    /* ============================================================
       4. INFINITE KINETIC DIVIDER ENGINE
       ============================================================ */
    .divider {
      position: relative; 
      width: 100%; 
      height: 2px; 
      z-index: 5;
      transform: translateZ(0); 
    }

    .divider__axis {
      position: absolute; left: 50%; width: 1905px; height: 1px; transform: translateX(-50%);
      display: flex; align-items: center;
    }

    .divider__line { width: 100%; border: none; border-top: 1px dashed var(--line-color); }

    .divider__container {
      position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);
      width: 100%; max-width: 1400px; height: 100%; display: flex; align-items: center;
    }

    .divider__mask { position: absolute; height: 14px; width: 50%; overflow: hidden; display: flex; align-items: center; }
    .divider__mask--l { left: 0; }
    .divider__mask--r { right: 0; }

    /* Shimmer: Comet Physics with Gradient Tail */
    .divider__shimmer { 
      position: absolute; height: 1.5px; width: 65%; opacity: 0; 
      filter: blur(0.8px);
    }

    .divider__diamond {
      position: absolute; width: var(--d-active-sz); height: var(--d-active-sz);
      background: transparent; border: 1px solid var(--line-color); border-radius: 2px;
      z-index: 5; transition: all 1s var(--bezier-kinetic);
    }
    .divider__diamond--l { left: 0; transform: translate(-50%, 0) rotate(45deg); }
    .divider__diamond--r { right: 0; transform: translate(50%, 0) rotate(45deg); }

    /* --- ANIMATION LOGIC --- */
    .divider[data-state="animating"] .divider__diamond {
      transition-delay: var(--charging-delay);
      border-color: var(--brand);
      box-shadow: 0 0 15px var(--brand-glow);
    }

    .divider[data-state="animating"] .divider__shimmer--l {
      background: linear-gradient(to left, var(--brand) 0%, color-mix(in oklch, var(--brand), transparent 75%) 35%, transparent 100%);
      animation: sweepOutL var(--anim-speed) var(--bezier-kinetic) forwards;
      animation-delay: calc(var(--charging-delay) + 0.1s);
    }

    .divider[data-state="animating"] .divider__shimmer--r {
      background: linear-gradient(to right, var(--brand) 0%, color-mix(in oklch, var(--brand), transparent 75%) 35%, transparent 100%);
      animation: sweepOutR var(--anim-speed) var(--bezier-kinetic) forwards;
      animation-delay: calc(var(--charging-delay) + 0.1s);
    }

    /* Final Charged State */
    .divider[data-state="done"] .divider__diamond {
      background: var(--brand);
      border-color: var(--brand);
      box-shadow: 0 0 15px var(--brand-glow), 0 0 40px var(--brand-nebula), inset 0 0 5px var(--brand-glow);
    }

    @keyframes sweepOutL { 0% { right: var(--d-offset); opacity: 0; } 15% { opacity: 1; } 100% { right: 100%; opacity: 0; } }
    @keyframes sweepOutR { 0% { left: var(--d-offset); opacity: 0; } 15% { opacity: 1; } 100% { left: 100%; opacity: 0; } }
  </style>
</head>
<body>

  <div class="parallax-wrapper">
    <div class="stars-layer stars-layer-1"></div>
    <div class="stars-layer stars-layer-2"></div>

    <main class="layout-frame">
      
      <section class="section">
        <div class="parallax-bg-text">INFINITY</div>
        <div class="content-float">
          <span class="badge">Masterpiece V12</span>
          <h2>Celestial Singularity.</h2>
          <p>Architectural minimalism meets the infinite cosmic void. A kinetic journey through 3D spatial depth.</p>
        </div>
      </section>

      <div class="divider js-repeat" data-state="idle">
        <div class="divider__axis"><hr class="divider__line"><div class="divider__container">
          <div class="divider__mask divider__mask--l"><span class="divider__shimmer divider__shimmer--l"></span></div>
          <div class="divider__mask divider__mask--r"><span class="divider__shimmer divider__shimmer--r"></span></div>
          <span class="divider__diamond divider__diamond--l"></span><span class="divider__diamond divider__diamond--r"></span>
        </div></div>
      </div>

      <section class="section">
        <div class="parallax-bg-text">KINETIC</div>
        <div class="content-float">
          <span class="badge">Thermal Conduction</span>
          <h2>Energy Pulse.</h2>
          <p>Scroll up and down to re-trigger the emission cycle. Every star marker follows the laws of digital physics.</p>
        </div>
      </section>

      <div class="divider js-repeat" data-state="idle">
        <div class="divider__axis"><hr class="divider__line"><div class="divider__container">
          <div class="divider__mask divider__mask--l"><span class="divider__shimmer divider__shimmer--l"></span></div>
          <div class="divider__mask divider__mask--r"><span class="divider__shimmer divider__shimmer--r"></span></div>
          <span class="divider__diamond divider__diamond--l"></span><span class="divider__diamond divider__diamond--r"></span>
        </div></div>
      </div>

      <section class="section">
        <div class="parallax-bg-text">VOYAGER</div>
        <div class="content-float">
          <span class="badge">Final Deployment</span>
          <h2>The Event Horizon.</h2>
          <p>Your cosmic interface is now complete. Clean, performant, and infinitely repeating.</p>
        </div>
      </section>

    </main>
  </div>

  <script>
    /**
     * V12 INFINITE ENGINE
     * Reactive state-machine for repeatable cosmic animations.
     */
    const initCosmicEngine = () => {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          const el = entry.target;
          
          if (entry.isIntersecting) {
            if (el.getAttribute('data-state') === 'idle') {
              el.setAttribute('data-state', 'animating');
              
              // Transition to 'done' (Filled) after emission duration
              setTimeout(() => {
                if (el.getAttribute('data-state') === 'animating') {
                  el.setAttribute('data-state', 'done');
                }
              }, 2200);
            }
          } else {
            // Reset to idle for infinite repetition when re-entering viewport
            el.setAttribute('data-state', 'idle');
          }
        });
      }, { threshold: 0.85 });

      document.querySelectorAll('.js-repeat').forEach(d => observer.observe(d));
    };

    window.addEventListener('DOMContentLoaded', initCosmicEngine);
  </script>
</body>
</html>